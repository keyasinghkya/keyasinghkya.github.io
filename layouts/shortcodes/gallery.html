<div class="gallery-box border-4 border-neutral-300 dark:border-neutral-600 rounded-lg p-6 my-8">
  {{ if .Get "title" }}
  <h3 class="gallery-title text-xl font-bold mb-1">{{ .Get "title" }}</h3>
  {{ end }}

  <!-- Location and Date on same line -->
  {{ if or (.Get "location") (.Get "date") }}
  <p class="gallery-location text-sm mb-2">
    {{ if .Get "location" }}{{ .Get "location" }}{{ end }}
    {{ if and (.Get "location") (.Get "date") }}, {{ end }}
    {{ if .Get "date" }}{{ .Get "date" }}{{ end }}
  </p>
  {{ end }}

  <!-- Short description text -->
  {{ if .Get "description" }}
  <p class="gallery-description text-sm mb-2">{{ .Get "description" }}</p>
  {{ end }}

  <!-- Image credits -->
  {{ if .Get "credits" }}
  <p class="gallery-credits text-xs italic mb-4">{{ .Get "credits" }}</p>
  {{ end }}

  <div class="image-gallery">
    {{ $images := split (.Get "images") "," }}
    {{ $captions := split (.Get "captions" | default "") "|" }}
    {{ range $index, $image := $images }}
      <div class="gallery-item">
        <img src="{{ trim $image " " }}" alt="" loading="lazy">
        {{ if index $captions $index }}
        <p class="image-caption">{{ index $captions $index }}</p>
        {{ end }}
      </div>
    {{ end }}
  </div>
</div>

<style>
  .gallery-title {
    color: white;
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9),
                 0 0 20px rgba(0, 0, 0, 0.8);
  }

  .gallery-location {
    color: rgb(var(--color-primary-400));
    text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.9),
                 0 0 10px rgba(0, 0, 0, 0.7);
  }

  .dark .gallery-location {
    color: rgb(var(--color-primary-300));
  }

  .gallery-description {
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.9);
  }

  .dark .gallery-description {
    color: rgba(255, 255, 255, 0.9);
  }

  .gallery-credits {
    color: rgba(255, 255, 255, 0.8);
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.9);
  }

  .dark .gallery-credits {
    color: rgba(255, 255, 255, 0.7);
  }

  .image-gallery {
    display: flex;
    overflow-x: auto;
    gap: 1rem;
    padding: 0rem 0 1rem 0;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
  }

  .gallery-item {
    flex-shrink: 0;
    scroll-snap-align: start;
  }

  .image-gallery img {
    height: 600px;
    min-width: 450px;
    object-fit: cover;
    border-radius: 8px;
    display: block;
  }

  .image-caption {
    margin-top: 0.5rem;
    font-size: 0.875rem;
    color: rgb(var(--color-neutral-600));
    max-width: 450px;
  }

  .dark .image-caption {
    color: rgb(var(--color-neutral-400));
  }

  /* Mobile responsiveness */
  @media (max-width: 768px) {
    .image-gallery img {
      height: 400px;
      min-width: 300px;
    }
    .image-caption {
      max-width: 300px;
    }
  }

  @media (max-width: 480px) {
    .image-gallery img {
      height: 300px;
      min-width: 250px;
    }
    .image-caption {
      max-width: 250px;
    }
  }

  .image-gallery::-webkit-scrollbar {
    height: 8px;
  }

  .image-gallery::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.1);
    border-radius: 10px;
  }

  .image-gallery::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.3);
    border-radius: 10px;
  }
</style>
